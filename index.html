<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Love Tree ‚Äî For My Bestie ‚ù§Ô∏è</title>
<style>
  :root{
    --bg1:#05040a; --accent:#ff4d6d; --soft:#ff9bb3; --glow:rgba(255,77,109,0.18);
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:radial-gradient(ellipse at bottom, #08101a 0%, #020209 100%);font-family:Inter,system-ui,Segoe UI,Roboto,Arial;color:#fff;overflow:hidden}
  /* star background (simple) */
  .stars{position:fixed;inset:0;z-index:-4;pointer-events:none;background:
    radial-gradient(circle at 10% 20%, rgba(255,255,255,.06) 1px, transparent 1px),
    radial-gradient(circle at 80% 40%, rgba(255,255,255,.04) 1px, transparent 1px),
    radial-gradient(circle at 40% 70%, rgba(255,255,255,.05) 1px, transparent 1px);
    background-size: 120px 120px, 180px 180px, 140px 140px;
    opacity:.95;filter:contrast(120%);}
  /* slow vignette for mood */
  .vignette{position:fixed;inset:0;z-index:-3;pointer-events:none;background:radial-gradient(ellipse at center, rgba(255,50,90,0.02), rgba(0,0,0,0.6));}
  /* shooting star */
  .shoot{position:fixed;left:-20%;top:12%;width:260px;height:2px;background:linear-gradient(90deg, rgba(255,255,255,.95), rgba(255,255,255,0));opacity:0;transform:rotate(-25deg);z-index:-2;pointer-events:none;filter:blur(1px);}

  /* falling hearts layer */
  .falling{position:fixed;inset:0;pointer-events:none;z-index:-2}

  /* page stage */
  .stage{position:relative;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:28px}
  .panel{width:100%;max-width:1100px;padding:16px;border-radius:14px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));box-shadow:0 40px 120px rgba(0,0,0,0.6);border:1px solid rgba(255,255,255,0.03);backdrop-filter: blur(6px)}
  header{display:flex;align-items:center;justify-content:space-between;gap:16px}
  h1{margin:0;font-size:20px}
  .desc{opacity:.85;font-size:13px;margin-top:6px}

  .playBtn{background:linear-gradient(90deg,var(--accent),#ff7a88);border:none;padding:12px 18px;border-radius:999px;color:white;font-weight:700;cursor:pointer;box-shadow:0 12px 40px var(--glow);font-size:15px}
  .playBtn:active{transform:scale(.99)}

  /* tree container */
  .tree-wrap{position:relative;margin-top:18px;height:66vh;max-height:760px;display:flex;align-items:center;justify-content:center}
  .tree-card{width:92%;max-width:900px;height:92%;background:transparent;border-radius:14px;display:flex;align-items:center;justify-content:center;position:relative}
  svg.tree{width:86%;height:86%}

  /* tree silhouette style (glow) */
  .tree-outline{stroke:#ffffff;stroke-opacity:.95;stroke-width:3;fill:none;filter:drop-shadow(0 12px 40px rgba(255,77,109,0.12));}
  .tree-fill{fill:rgba(255,255,255,0.02);}

  /* small hearts scattered on branches */
  .small-heart{
    position:absolute;pointer-events:none;font-size:12px;color:var(--accent);opacity:.95;transform-origin:center;
    text-shadow:0 6px 18px rgba(255,77,109,0.12);
    animation:smallPulse 2.4s ease-in-out infinite;
  }
  @keyframes smallPulse{0%{transform:scale(.85)}50%{transform:scale(1.07)}100%{transform:scale(.85)}}

  /* big hanging hearts */
  .big-heart{
    position:absolute;width:72px;height:72px;border-radius:999px;display:flex;align-items:center;justify-content:center;font-size:34px;color:var(--accent);
    background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
    box-shadow:0 20px 50px rgba(255,77,109,0.12);cursor:pointer;transition:transform .18s, box-shadow .18s;
    transform-origin:center top;
  }
  .big-heart .h{filter:drop-shadow(0 8px 20px rgba(255,20,100,0.14));}
  /* swing */
  .swing{animation:swingAnim 3.6s ease-in-out infinite}
  @keyframes swingAnim{0%{transform:rotate(-6deg)}50%{transform:rotate(6deg)}100%{transform:rotate(-6deg)}}
  .big-heart:active{transform:scale(.97)}

  /* modal question */
  .modal{position:fixed;left:50%;top:72%;transform:translate(-50%,-50%);min-width:320px;max-width:520px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:14px;border-radius:12px;box-shadow:0 20px 50px rgba(0,0,0,0.6);z-index:60;border:1px solid rgba(255,255,255,0.03);display:none}
  .qtxt{font-weight:800;margin-bottom:10px}
  .opts{display:flex;gap:12px}
  .opt{flex:1;padding:10px;border-radius:10px;text-align:center;font-weight:700;cursor:pointer;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03)}
  .opt.primary{background:linear-gradient(90deg,var(--accent),#ff7a88);color:#fff;border:none;box-shadow:0 12px 36px rgba(255,77,109,0.12)}
  .opt.dodge{position:relative;transition:transform .12s ease}

  /* burn overlay */
  .burn{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:radial-gradient(circle at center, rgba(255,120,140,0.04), rgba(0,0,0,0.6));z-index:90}
  .burn .heart{font-size:120px;animation:burnAnim 2.4s cubic-bezier(.2,.9,.2,1) forwards}
  @keyframes burnAnim{0%{transform:scale(.8);opacity:1}50%{transform:scale(1.05);opacity:1}100%{transform:scale(2.6);opacity:0;filter:blur(8px)}}

  /* reveal */
  .reveal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:100;padding:28px}
  .revealPanel{width:100%;max-width:1000px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:14px;padding:18px;display:flex;gap:18px;align-items:center;justify-content:center;flex-wrap:wrap;backdrop-filter:blur(4px);border:1px solid rgba(255,255,255,0.03)}
  .bigImg{width:52%;max-width:520px;border-radius:14px;box-shadow:0 30px 80px rgba(0,0,0,0.6);transform-origin:center;transition:transform .5s}
  .sideImgs{width:38%;display:flex;flex-direction:column;gap:14px}
  .sideImgs img{width:100%;border-radius:12px;box-shadow:0 20px 60px rgba(0,0,0,0.45)}
  .final-line{font-weight:800;text-align:center;font-size:20px;color:var(--soft);text-shadow:0 0 20px rgba(255,0,80,0.08);margin-top:6px}

  /* floating 'I ‚ù§Ô∏è U' */
  .floater{position:absolute;pointer-events:none;font-weight:800;color:var(--accent);opacity:.95;filter:drop-shadow(0 8px 20px rgba(255,20,100,0.12))}

  /* responsive */
  @media (max-width:720px){
    .tree-wrap{height:60vh}
    .bigImg{width:92%}
    .sideImgs{width:92%}
  }
</style>
</head>
<body>
  <div class="stars"></div>
  <div class="vignette"></div>
  <div class="shoot" id="shoot"><div class="tail"></div></div>
  <div class="falling" id="falling"></div>

  <div class="stage">
    <div class="panel" role="main">
      <header>
        <div>
          <h1>For my Bestie ‚ù§Ô∏è</h1>
          <div class="desc">Tap any hanging heart on the tree and answer ‚Äî a surprise awaits.</div>
        </div>
        <div>
          <button class="playBtn" id="manualPlay">‚ñ∂ Play (1.25x)</button>
        </div>
      </header>

      <div class="tree-wrap" id="treeWrap">
        <div class="tree-card" id="treeCard">
          <!-- SVG tree silhouette (full shape) -->
          <svg class="tree" viewBox="0 0 500 620" preserveAspectRatio="xMidYMid meet" aria-hidden="true">
            <!-- soft fill shadow behind -->
            <path d="M250 600 C250 520 250 440 250 390 C220 360 180 340 160 300 C140 260 120 220 140 180 C170 140 210 120 250 110 C290 100 330 118 360 150 C390 182 420 220 410 260 C400 300 370 340 350 360 C330 380 300 400 270 420 C250 440 250 520 250 600 Z"
                  class="tree-fill"/>
            <!-- outline -->
            <path d="M250 600 C250 520 250 440 250 390 C220 360 180 340 160 300 C140 260 120 220 140 180 C170 140 210 120 250 110 C290 100 330 118 360 150 C390 182 420 220 410 260 C400 300 370 340 350 360 C330 380 300 400 270 420 C250 440 250 520 250 600 Z"
                  class="tree-outline"/>
            <!-- branches extra -->
            <path d="M180 320 C130 300 110 260 120 220" class="tree-outline"/>
            <path d="M320 300 C370 280 410 260 420 230" class="tree-outline"/>
            <path d="M220 240 C210 200 180 170 160 150" class="tree-outline"/>
            <path d="M280 240 C290 200 320 170 350 150" class="tree-outline"/>
          </svg>

          <!-- small hearts scattered by JS -->
          <!-- big hanging hearts (4) -->
          <div class="big-heart swing" id="B1" style="left:40%; top:34%; transform-origin:center top;"><div class="h">‚ù§Ô∏è</div></div>
          <div class="big-heart swing" id="B2" style="left:30%; top:44%; transform-origin:center top;"><div class="h">‚ù§Ô∏è</div></div>
          <div class="big-heart swing" id="B3" style="left:55%; top:40%; transform-origin:center top;"><div class="h">‚ù§Ô∏è</div></div>
          <div class="big-heart swing" id="B4" style="left:48%; top:50%; transform-origin:center top;"><div class="h">‚ù§Ô∏è</div></div>

          <!-- container for many small hearts -->
          <div id="smallContainer" style="position:absolute;inset:0;pointer-events:none"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- modal question -->
  <div class="modal" id="modal" role="dialog" aria-modal="true">
    <div class="qtxt" id="qtxt"></div>
    <div class="opts">
      <div class="opt" id="opt1"></div>
      <div class="opt primary" id="opt2"></div>
    </div>
  </div>

  <!-- burn overlay -->
  <div class="burn" id="burn"><div class="heart">‚ù§Ô∏èüî•</div></div>

  <!-- reveal -->
  <div class="reveal" id="reveal">
    <div class="revealPanel">
      <div class="bigImg" id="bigImgWrap"><img id="bigImg" src="pic2.jpg" alt="pic2" style="width:100%;display:block;border-radius:12px"></div>
      <div class="sideImgs">
        <img id="side1" src="pic1.jpg" alt="pic1">
        <div class="final-line" id="finalLine">Your beauty shines brighter than every star, my precious friend ‚ù§Ô∏è</div>
      </div>
    </div>
  </div>

  <!-- floating I‚ù§Ô∏èU layer -->
  <div id="floaters" style="position:fixed;inset:0;pointer-events:none;z-index:95"></div>

  <!-- audio -->
  <audio id="audio" src="song.mp3" preload="auto"></audio>

<script>
/* ---------- Autoplay & playbackRate ---------- */
const audio = document.getElementById('audio');
audio.playbackRate = 1.25;
audio.volume = 0.78;

// try autoplay; fallback to first user interaction
function tryPlayOnce(){
  audio.play().catch(()=>{/* blocked by browser */});
}
window.addEventListener('load', ()=> { tryPlayOnce(); });
function onFirstInteraction(){ tryPlayOnce(); window.removeEventListener('click', onFirstInteraction); window.removeEventListener('touchstart', onFirstInteraction); }
window.addEventListener('click', onFirstInteraction); window.addEventListener('touchstart', onFirstInteraction);

// manual play button as extra
document.getElementById('manualPlay').addEventListener('click', ()=> { tryPlayOnce(); });

/* ---------- shooting star occasional ---------- */
const shoot = document.getElementById('shoot');
function runShoot(){
  shoot.style.opacity = 1;
  shoot.style.left = '-20%';
  shoot.style.top = (8 + Math.random()*40) + '%';
  shoot.style.transition = 'left 1.1s linear, opacity .8s';
  shoot.style.left = '120%';
  setTimeout(()=> { shoot.style.opacity = 0; shoot.style.left='-20%'; }, 1300);
}
setInterval(()=> { if(Math.random()<0.6) runShoot(); }, 5200);

/* ---------- falling hearts decorative ---------- */
const falling = document.getElementById('falling');
function spawnFall(){
  const el = document.createElement('div'); el.className='fheart'; el.innerText='‚ù§Ô∏è';
  const size = 14 + Math.random()*30; el.style.fontSize = size+'px';
  el.style.left = (5 + Math.random()*90)+'vw';
  el.style.top = '-8vh';
  el.style.opacity = (0.6 + Math.random()*0.4);
  const dur = 5 + Math.random()*6;
  el.style.transition = `transform ${dur}s linear, top ${dur}s linear, opacity ${dur}s`;
  falling.appendChild(el);
  requestAnimationFrame(()=> { el.style.top = (110 + Math.random()*10)+'vh'; el.style.transform = `translateY(${window.innerHeight}px) rotate(${Math.random()*360}deg)`; el.style.opacity=0; });
  setTimeout(()=> el.remove(), (dur*1000)+400);
}
setInterval(spawnFall, 700);

/* ---------- many small hearts on tree ---------- */
const smallContainer = document.getElementById('smallContainer');
function scatterSmallHearts(count=40){
  const wrap = document.getElementById('treeCard').getBoundingClientRect();
  for(let i=0;i<count;i++){
    const el = document.createElement('div');
    el.className='small-heart';
    el.innerText='‚ù§Ô∏è';
    const rx = Math.random()*80 + 10; // percent area
    const ry = Math.random()*70 + 10;
    el.style.left = rx + '%';
    el.style.top = ry + '%';
    el.style.fontSize = (9 + Math.random()*10) + 'px';
    el.style.opacity = (0.6 + Math.random()*0.4);
    // slight offset animation delay
    el.style.animationDelay = (Math.random()*2)+'s';
    smallContainer.appendChild(el);
  }
}
scatterSmallHearts(48);

/* ---------- Big heart click nodes & question flow ---------- */
const nodes = ['B1','B2','B3','B4'].map(id=>document.getElementById(id));
const modal = document.getElementById('modal');
const qtxt = document.getElementById('qtxt');
const opt1 = document.getElementById('opt1');
const opt2 = document.getElementById('opt2');
const burn = document.getElementById('burn');
const reveal = document.getElementById('reveal');
const floaters = document.getElementById('floaters');

const questions = [
  {q:"Why you are so beautiful?", a1:"Because I smile", a2:"Because of you"},
  {q:"Apki aawaaz mujhe maar degi kisi din, gaogi 'Janemann' kya?", a1:"Yes", a2:"No"},
  {q:"Agar mai poochu: Momos ya Mujhe ‚Äî kisko chunogi?", a1:"Momos", a2:"Mujhe"},
  {q:"I know you are cute ‚Äî kya tum meri beti banogi ache wali?", a1:"Yes", a2:"No"}
];
let seqIndex = 0; // show questions in order of clicks but using seqIndex

// clickable only when tree ready
let treeReady = false;
setTimeout(()=> treeReady = true, 700); // allow short time for visuals

// place swing variations for each node
nodes.forEach((n,i)=>{
  // subtle different swing speed
  n.style.animationDuration = (3 + i*0.6) + 's';
  n.addEventListener('click', ()=> {
    if(!treeReady) return;
    // show next question in sequence
    if(seqIndex >= questions.length) return;
    showQuestion(seqIndex, n, i);
  });
});

function showQuestion(idx, nodeEl, nodeIdx){
  // disable clicked node so user can't spam
  nodeEl.style.pointerEvents='none';
  qtxt.textContent = questions[idx].q;
  opt1.textContent = questions[idx].a1;
  opt2.textContent = questions[idx].a2;
  modal.style.display = 'block';
  // reset transforms
  opt1.style.transform = ''; opt2.style.transform = '';

  // remove previous handlers
  opt1.onclick = opt2.onclick = null;

  // special for question 3 (index 2): Momos dodge
  if(idx === 2){
    opt1.onclick = ()=> {
      // opt1 = Momos -> dodge
      dodge(opt1);
      tinyToast("Momos naughty üòÇ Try the other option!");
    };
    opt2.onclick = ()=> {
      chooseAndProceed('Mujhe');
    };
  } else if(idx === 3){
    // final
    opt1.onclick = ()=> { // Yes
      modal.style.display='none';
      seqIndex++;
      fireHearts(12);
      triggerReveal();
    };
    opt2.onclick = ()=> { // No
      modal.style.display='none';
      tinyToast("Katti hu tumse ab me üò§");
      // show broken heart briefly
      showBroken();
    };
  } else {
    opt1.onclick = ()=> { modal.style.display='none'; seqIndex++; fireHearts(6); tinyToast("Nice!");};
    opt2.onclick = ()=> { modal.style.display='none'; seqIndex++; fireHearts(6); tinyToast("Okay :)");};
  }
}

function chooseAndProceed(ans){
  modal.style.display='none';
  seqIndex++;
  fireHearts(8);
  tinyToast("Aww ‚ù§Ô∏è");
}

/* dodge animation */
function dodge(btn){
  const r = 70 + Math.random()*140;
  const a = Math.random()*Math.PI*2;
  btn.classList.add('dodge');
  btn.style.transform = `translate(${Math.cos(a)*r}px, ${Math.sin(a)*r}px)`;
  setTimeout(()=>{ btn.style.transform=''; btn.classList.remove('dodge'); }, 520);
}

/* tiny toast */
function tinyToast(msg){
  const t = document.createElement('div'); t.textContent=msg;
  Object.assign(t.style,{position:'fixed',left:'50%',transform:'translateX(-50%)',bottom:'8%',background:'linear-gradient(90deg,var(--accent),#ff8aa0)',padding:'8px 12px',borderRadius:'10px',zIndex:98,color:'#fff',fontWeight:700});
  document.body.appendChild(t);
  setTimeout(()=>{ t.style.transition='opacity .5s'; t.style.opacity=0; setTimeout(()=>t.remove(),500)},1500);
}

/* heart burst */
function fireHearts(n){
  for(let i=0;i<n;i++){
    const el = document.createElement('div'); el.className='fheart'; el.innerText='‚ù§Ô∏è';
    const size = 12 + Math.random()*34; el.style.fontSize = size+'px';
    el.style.left = (45 + Math.random()*20)+'vw'; el.style.top = (35 + Math.random()*20)+'vh';
    el.style.opacity = 1; el.style.position='fixed'; el.style.zIndex=70;
    document.body.appendChild(el);
    setTimeout(()=> {
      el.style.transition = 'transform 1000ms cubic-bezier(.2,.9,.2,1), opacity 900ms';
      el.style.transform = `translateY(${120 + Math.random()*220}px) rotate(${Math.random()*180-90}deg) scale(${0.6+Math.random()*0.9})`;
      el.style.opacity = 0;
    },30);
    setTimeout(()=> el.remove(), 1100);
  }
}

/* broken heart */
function showBroken(){
  const b = document.createElement('div'); b.textContent='üíî'; Object.assign(b.style,{position:'fixed',left:'50%',top:'22%',transform:'translateX(-50%)',fontSize:'72px',zIndex:99});
  document.body.appendChild(b); setTimeout(()=> b.remove(),1400);
}

/* final reveal */
function triggerReveal(){
  burn.style.display='flex';
  setTimeout(()=> { burn.style.display='none'; reveal.style.display='flex'; spawnFloaters(); try { audio.currentTime = 0; audio.play().catch(()=>{}); } catch(e){} }, 2200);
}

/* floaters */
function spawnFloaters(){
  for(let i=0;i<10;i++){
    const el = document.createElement('div'); el.className='floater'; el.textContent='I ‚ù§Ô∏è U';
    el.style.left = (8 + Math.random()*84)+'vw'; el.style.bottom = (6 + Math.random()*40)+'vh'; el.style.fontSize = (12 + Math.random()*26)+'px';
    floaters.appendChild(el);
    setTimeout(()=> el.remove(), 6000 + Math.random()*2000);
  }
}

/* clicking big image toggles side reveal (already visible) -> small animation */
document.getElementById('bigImg').addEventListener('click', ()=> {
  const big = document.getElementById('bigImg');
  big.animate([{transform:'scale(1)'},{transform:'scale(1.03)'},{transform:'scale(1)'}],{duration:600});
});

/* spawn small hearts occasionally (already created many) - add subtle movement */
setInterval(()=> {
  const smalls = document.querySelectorAll('.small-heart');
  smalls.forEach((s)=> {
    s.style.transform = `scale(${0.95 + Math.random()*0.18}) translateY(${Math.random()*6-3}px)`;
  });
}, 1800);

/* clicking outside modal does nothing - force choice */
/* close modal when answered handled in logic */

/* Helpful: hide modal if present when clicking anywhere else (non-intrusive) */
document.addEventListener('click', (e)=> {
  if(document.getElementById('modal').style.display === 'block'){
    // keep open until user chooses - do not auto-close
  }
});

/* place small hearts responsive (already percent-based) */
/* done */

/* try place nodes after layout - they are placed via inline % so fine */

/* autoplay fallback has been added earlier */

</script>
</body>
</html>
